import{b as L,a as D,r as x,j as e,L as N}from"./index-BHCqBCzC.js";const U=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function Z(){const a=L(),{state:r,cartTotal:m,cartItemsCount:l,clearCart:c,updateCartQty:n,removeFromCart:f}=D(),[s,h]=x.useState({firstName:"",lastName:"",email:"",phone:""}),[i,u]=x.useState({line1:"",line2:"",city:"",country:"",zip:""}),[w,z]=x.useState("standard"),[C,k]=x.useState("card"),[R,A]=x.useState(""),[I,M]=x.useState(!1),[g,F]=x.useState(!1),P=w==="express"?19.99:0,E=0,j=m,S=j*E,q=x.useMemo(()=>Number(j+P+S),[j,P,S]),$=(r.cart?.length||0)>0,d=[];s.firstName.trim()||d.push("First name"),s.lastName.trim()||d.push("Last name"),U.test(s.email)||d.push("Valid email"),s.phone.trim()||d.push("Phone"),i.line1.trim()||d.push("Address line 1"),i.city.trim()||d.push("City"),i.country.trim()||d.push("Country"),i.zip.trim()||d.push("ZIP/Postal code");const y=d.length===0&&I&&$,T=async()=>{if(!(!y||g))try{F(!0);const t=`ORD-${Math.random().toString(36).slice(2,8).toUpperCase()}`;c(),a("/order-confirmation",{state:{orderId:t,grandTotal:q,email:s.email,items:l},replace:!0})}finally{F(!1)}};return e.jsxs("div",{className:"relative min-h-screen bg-black/30 text-white",children:[e.jsx("button",{onClick:()=>a(-1),className:"fixed top-6 left-6 cursor-pointer z-50 w-10 h-10 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white/90 hover:text-white text-3xl","aria-label":"Go back",children:"←"}),e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Checkout"}),e.jsxs(N,{to:"/cart",className:"text-sm underline opacity-80 hover:opacity-100",children:["Edit Cart (",l,")"]})]}),$?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(p,{title:"Customer Information",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(o,{label:"First name",value:s.firstName,onChange:t=>h({...s,firstName:t}),required:!0}),e.jsx(o,{label:"Last name",value:s.lastName,onChange:t=>h({...s,lastName:t}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[e.jsx(o,{type:"email",label:"Email",value:s.email,onChange:t=>h({...s,email:t}),required:!0}),e.jsx(o,{label:"Phone",value:s.phone,onChange:t=>h({...s,phone:t}),required:!0})]})]}),e.jsxs(p,{title:"Shipping Address",children:[e.jsx(o,{label:"Address line 1",value:i.line1,onChange:t=>u({...i,line1:t}),required:!0}),e.jsx(o,{label:"Address line 2 (optional)",value:i.line2,onChange:t=>u({...i,line2:t})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3",children:[e.jsx(o,{label:"City",value:i.city,onChange:t=>u({...i,city:t}),required:!0}),e.jsx(o,{label:"Country",value:i.country,onChange:t=>u({...i,country:t}),required:!0}),e.jsx(o,{label:"ZIP / Postal code",value:i.zip,onChange:t=>u({...i,zip:t}),required:!0})]})]}),e.jsxs(p,{title:"Shipping Method",children:[e.jsx(b,{name:"shipping",checked:w==="standard",onChange:()=>z("standard"),headline:"Standard",subline:"3–5 business days",right:"$0.00"}),e.jsx(b,{name:"shipping",checked:w==="express",onChange:()=>z("express"),headline:"Express",subline:"1–2 business days",right:"$19.99"})]}),e.jsxs(p,{title:"Payment",children:[e.jsx(b,{name:"payment",checked:C==="card",onChange:()=>k("card"),headline:"Credit/Debit Card",subline:"Secure payments"}),e.jsx(b,{name:"payment",checked:C==="cod",onChange:()=>k("cod"),headline:"Cash on Delivery",subline:"Pay when your order arrives"}),e.jsx(b,{name:"payment",checked:C==="paypal",onChange:()=>k("paypal"),headline:"PayPal",subline:"Pay via your PayPal account"})]}),e.jsxs(p,{title:"Order Notes",children:[e.jsx("textarea",{rows:3,value:R,onChange:t=>A(t.target.value),className:"w-full rounded-md bg-white/5 border border-white/10 px-3 py-2 text-sm outline-none placeholder:text-zinc-400",placeholder:"Any special requests or delivery instructions?"}),e.jsxs("label",{className:"mt-3 flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:t=>M(t.target.checked),className:"accent-white"}),"I agree to the Terms & Privacy Policy"]}),!y&&e.jsx("p",{className:"mt-2 text-xs text-red-300",children:$?"Please complete all required fields and accept the terms.":"Your cart is empty."})]})]}),e.jsxs("aside",{className:"h-fit space-y-4",children:[e.jsx(V,{items:r.cart,subTotal:j,shippingFee:P,tax:S,grandTotal:q,onQty:(t,O)=>n(t,O),onRemove:t=>f(t)}),e.jsx("button",{onClick:T,disabled:!y||g,className:`w-full h-11 rounded text-sm font-medium ${!y||g?"bg-white/20 text-white/70 cursor-not-allowed":"bg-white text-black hover:bg-zinc-100"}`,children:g?"Placing Order…":`Place Order — $${q.toFixed(2)}`}),e.jsxs("p",{className:"text-[12px] text-white/70 text-center",children:["By placing your order, you agree to our"," ",e.jsx(N,{to:"/terms",className:"underline",children:"Terms"})," and"," ",e.jsx(N,{to:"/privacy",className:"underline",children:"Privacy Policy"}),"."]})]})]}):e.jsxs("div",{className:"rounded-lg border border-white/10 bg-black/50 p-6 text-zinc-300",children:["Your cart is empty. ",e.jsx(N,{to:"/menPage",className:"underline",children:"Continue shopping"})]})]})]})}function p({title:a,children:r}){return e.jsxs("div",{className:"rounded-lg border border-white/10 bg-black/50 p-4",children:[a&&e.jsx("h2",{className:"text-sm font-semibold mb-3",children:a}),r]})}function o({label:a,value:r,onChange:m,type:l="text",required:c}){return e.jsxs("label",{className:"block text-sm",children:[e.jsxs("span",{className:"mb-1 block text-zinc-300",children:[a," ",c&&e.jsx("sup",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:l,value:r,onChange:n=>m(n.target.value),required:c,className:"w-full rounded-md bg-white/5 border border-white/10 px-3 h-10 text-sm outline-none placeholder:text-zinc-400",placeholder:a})]})}function b({name:a,checked:r,onChange:m,headline:l,subline:c,right:n}){return e.jsxs("label",{className:"flex items-center gap-3 py-2 px-3 rounded hover:bg-white/5 cursor-pointer",children:[e.jsx("input",{type:"radio",name:a,checked:r,onChange:m,className:"accent-white"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium",children:l}),c&&e.jsx("div",{className:"text-xs text-white/70",children:c})]}),n&&e.jsx("div",{className:"text-sm",children:n})]})}function V({items:a,subTotal:r,shippingFee:m,tax:l,grandTotal:c,onQty:n,onRemove:f}){return e.jsxs("div",{className:"rounded-lg border border-white/10 bg-black/50 p-4",children:[e.jsx("h2",{className:"text-sm font-semibold mb-3",children:"Order Summary"}),e.jsx("ul",{className:"space-y-2 max-h-72 overflow-auto pr-1",children:a.map(s=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.image??"/placeholder.webp",alt:s.name,className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-zinc-300",children:["$",Number(s.price||0).toFixed(2)]})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxs("div",{className:"inline-flex items-stretch rounded-full border border-white/15 overflow-hidden",children:[e.jsx("button",{className:"px-2 text-[11px] text-white/90 hover:bg-white/10 disabled:opacity-40",disabled:(s.quantity||1)<=1,onClick:()=>n(s.id,Math.max(1,(s.quantity||1)-1)),"aria-label":"Decrease quantity",children:"−"}),e.jsx("input",{type:"number",min:1,max:99,value:s.quantity||1,onChange:h=>n(s.id,Math.max(1,Math.min(99,Number(h.target.value||1)))),className:"w-10 text-center text-[11px] bg-transparent outline-none"}),e.jsx("button",{className:"px-2 text-[11px] text-white/90 hover:bg-white/10",onClick:()=>n(s.id,Math.min(99,(s.quantity||1)+1)),"aria-label":"Increase quantity",children:"+"})]}),e.jsx("button",{className:"text-[11px] text-red-300 hover:text-red-200",onClick:()=>f(s.id),children:"Remove"})]})]})]},s.id))}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[e.jsx(v,{label:"Subtotal",value:`$${r.toFixed(2)}`}),e.jsx(v,{label:"Shipping",value:m===0?"Free":`$${m.toFixed(2)}`}),l>0&&e.jsx(v,{label:"Tax",value:`$${l.toFixed(2)}`}),e.jsx(v,{label:"Total",value:e.jsxs("span",{className:"font-semibold",children:["$",c.toFixed(2)]})})]})]})}function v({label:a,value:r}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/80",children:a}),e.jsx("span",{children:r})]})}export{Z as default};
